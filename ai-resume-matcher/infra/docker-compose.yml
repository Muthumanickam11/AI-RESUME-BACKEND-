version: "3.9"

services:
	postgres:
		image: postgres:16
		environment:
			POSTGRES_USER: postgres
			POSTGRES_PASSWORD: postgres
			POSTGRES_DB: ai_resume_matcher
		ports:
			- "5432:5432"
		volumes:
			- pgdata:/var/lib/postgresql/data

	backend:
		build:
			context: ..
			dockerfile: backend/Dockerfile
		depends_on:
			- postgres
		environment:
			DATABASE_URL: postgresql+psycopg2://postgres:postgres@postgres:5432/ai_resume_matcher
			SBERT_MODEL: sentence-transformers/all-MiniLM-L6-v2
		ports:
			- "8000:8000"

volumes:
	pgdata:


